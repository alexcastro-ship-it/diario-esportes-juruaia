<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Alunos</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="logo-prefeitura.png">
  <div>
    <h1>Diário Digital do Esporte</h1>
    <p>Instituição: Prefeitura de Juruaia</p>
    <p>Professor Responsável: Alex Castro</p>
  </div>
</header>

<nav>
  <a href="index.html">Início</a>
  <a href="turmas.html">Cadastro de Turmas</a>
  <a href="cadastro.html">Cadastro de Alunos</a>
  <a href="aulas.html">Aulas e Chamada</a>
  <a href="ocorrencias.html">Ocorrências</a>
  <a href="relatorio.html">Relatórios</a>
</nav>

<main>
  <h2>Cadastro de Alunos</h2>

  <form id="formAluno">
    <label>Nome do Aluno:</label><br>
    <input type="text" id="nome"><br><br>

    <label>Data de Nascimento:</label><br>
    <input type="date" id="nascimento"><br><br>

    <label>WhatsApp:</label><br>
    <input type="text" id="whatsapp"><br><br>

    <label>Nome do Pai:</label><br>
    <input type="text" id="pai"><br><br>

    <label>Nome do Responsável:</label><br>
    <input type="text" id="responsavel"><br><br>

    <label>Turma:</label><br>
    <select id="turmaAluno"></select><br><br>

    <button type="button" onclick="salvarAluno()">Salvar Aluno</button>
  </form>

  <h3>Alunos Cadastrados</h3>
  <table border="1" width="100%" id="tabelaAlunos">
    <tr>
      <th>Nome</th>
      <th>Turma</th>
      <th>WhatsApp</th>
    </tr>
  </table>
</main>

<script>
// ===== Carregar turmas no select =====
function carregarTurmasSelect() {
  let turmas = JSON.parse(localStorage.getItem("turmas")) || [];
  let select = document.getElementById("turmaAluno");
  select.innerHTML = "";

  turmas.forEach(t => {
    let option = document.createElement("option");
    option.value = t.nome;
    option.text = t.nome + " (" + t.professor + ")";
    select.appendChild(option);
  });
}

// ===== Salvar aluno =====
function salvarAluno() {
  let aluno = {
    nome: document.getElementById("nome").value,
    nascimento: document.getElementById("nascimento").value,
    whatsapp: document.getElementById("whatsapp").value,
    pai: document.getElementById("pai").value,
    responsavel: document.getElementById("responsavel").value,
    turma: document.getElementById("turmaAluno").value
  };

  if(aluno.nome === ""){
    alert("Digite o nome do aluno!");
    return;
  }

  let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
  alunos.push(aluno);
  localStorage.setItem("alunos", JSON.stringify(alunos));

  document.getElementById("formAluno").reset();
  listarAlunos();
}

// ===== Listar alunos =====
function listarAlunos() {
  let tabela = document.getElementById("tabelaAlunos");
  tabela.innerHTML = `
    <tr>
      <th>Nome</th>
      <th>Turma</th>
      <th>WhatsApp</th>
    </tr>
  `;

  let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
  alunos.forEach(a => {
    let linha = tabela.insertRow(-1);
    linha.insertCell(0).innerText = a.nome;
    linha.insertCell(1).innerText = a.turma;
    linha.insertCell(2).innerText = a.whatsapp;
  });
}

// ===== Inicialização =====
carregarTurmasSelect();
listarAlunos();
</script>

</body>
</html>
