<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Registro de Ocorr√™ncias</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="logo-prefeitura.png">
  <div>
    <h1>Di√°rio Digital do Esporte</h1>
    <p>Institui√ß√£o: Prefeitura de Juruaia</p>
    <p>Professor Respons√°vel: Alex Castro</p>
  </div>
</header>

<nav>
  <a href="index.html">In√≠cio</a>
  <a href="cadastro.html">Cadastro de Alunos</a>
  <a href="aulas.html">Aulas e Chamada</a>
  <a href="ocorrencias.html">Ocorr√™ncias</a>
  <a href="relatorio.html">Relat√≥rios</a>
</nav>

<main>

  <h2>Registro de Ocorr√™ncia</h2>

  <label>Data da Ocorr√™ncia:</label><br>
  <input type="date" id="dataOcorrencia"><br><br>

  <label>Aluno:</label><br>
  <select id="alunoOcorrencia"></select><br><br>

  <label>Descri√ß√£o da Ocorr√™ncia:</label><br>
  <textarea id="descricaoOcorrencia" rows="4" cols="50"></textarea><br><br>

  <button onclick="salvarOcorrencia()">Registrar Ocorr√™ncia</button>

  <hr>

  <h2>Ocorr√™ncias Registradas</h2>

  <table border="1" width="100%" id="tabelaOcorrencias">
    <tr>
      <th>Data</th>
      <th>Aluno</th>
      <th>Descri√ß√£o</th>
    </tr>
  </table>

  <br>
  <button onclick="window.print()">üñ®Ô∏è Imprimir Registro</button>

  <br><br>

  <p>Professor Respons√°vel: __________________________</p>
  <p>Diretor de Esportes: __________________________</p>

</main>

<script>
// --- Carregar alunos no select ---
function carregarAlunosSelect() {
  let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
  let select = document.getElementById("alunoOcorrencia");
  select.innerHTML = "";

  alunos.forEach(aluno => {
    let option = document.createElement("option");
    option.value = aluno.nome;
    option.text = aluno.nome;
    select.appendChild(option);
  });
}

// --- Salvar ocorr√™ncia ---
function salvarOcorrencia() {
  let data = document.getElementById("dataOcorrencia").value;
  let aluno = document.getElementById("alunoOcorrencia").value;
  let descricao = document.getElementById("descricaoOcorrencia").value;

  if(data === "" || descricao === "") {
    alert("Preencha todos os campos!");
    return;
  }

  let ocorrencias = JSON.parse(localStorage.getItem("ocorrencias")) || [];

  ocorrencias.push({
    data: data,
    aluno: aluno,
    descricao: descricao
  });

  localStorage.setItem("ocorrencias", JSON.stringify(ocorrencias));

  document.getElementById("dataOcorrencia").value = "";
  document.getElementById("descricaoOcorrencia").value = "";

  listarOcorrencias();
}

// --- Listar ocorr√™ncias ---
function listarOcorrencias() {
  let tabela = document.getElementById("tabelaOcorrencias");
  tabela.innerHTML = `
    <tr>
      <th>Data</th>
      <th>Aluno</th>
      <th>Descri√ß√£o</th>
    </tr>
  `;

  let ocorrencias = JSON.parse(localStorage.getItem("ocorrencias")) || [];

  ocorrencias.forEach(item => {
    let linha = tabela.insertRow(-1);
    linha.insertCell(0).innerText = item.data;
    linha.insertCell(1).innerText = item.aluno;
    linha.insertCell(2).innerText = item.descricao;
  });
}

// --- Inicializa√ß√£o ---
carregarAlunosSelect();
listarOcorrencias();
</script>

</body>
</html>
