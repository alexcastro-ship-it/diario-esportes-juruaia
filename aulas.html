<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Aulas e Chamada</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="logo-prefeitura.png">
  <div>
    <h1>Di√°rio Digital do Esporte</h1>
    <p>Institui√ß√£o: Prefeitura de Juruaia</p>
    <p>Professor Respons√°vel: Alex Castro</p>
  </div>
</header>

<nav>
  <a href="index.html">In√≠cio</a>
  <a href="turmas.html">Cadastro de Turmas</a>
  <a href="cadastro.html">Cadastro de Alunos</a>
  <a href="aulas.html">Aulas e Chamada</a>
  <a href="ocorrencias.html">Ocorr√™ncias</a>
  <a href="relatorio.html">Relat√≥rios</a>
</nav>

<main>
  <h2>Cadastro de Aula</h2>

  <label>Turma:</label><br>
  <select id="turmaChamada"></select><br><br>

  <label>Data da Aula:</label><br>
  <input type="date" id="dataAula"><br><br>

  <label>Tema da Aula:</label><br>
  <input type="text" id="temaAula"><br><br>

  <button onclick="criarChamada()">Criar Chamada</button>

  <hr>

  <h2>Lista de Chamada</h2>

  <p><strong>Turma:</strong> <span id="exibeTurma"></span></p>
  <p><strong>Data:</strong> <span id="exibeData"></span></p>
  <p><strong>Tema:</strong> <span id="exibeTema"></span></p>

  <table border="1" width="100%" id="tabelaChamada">
    <tr>
      <th>Aluno</th>
      <th>Presente</th>
      <th>Falta</th>
    </tr>
  </table>

  <br>
  <button onclick="window.print()">üñ®Ô∏è Imprimir Chamada</button>

  <br><br>

  <p>Professor Respons√°vel: __________________________</p>
  <p>Diretor de Esportes: __________________________</p>
</main>

<script>
// ===== carregar turmas =====
function carregarTurmas() {
  let turmas = JSON.parse(localStorage.getItem("turmas")) || [];
  let select = document.getElementById("turmaChamada");
  select.innerHTML = "";
  turmas.forEach(t => {
    let opt = document.createElement("option");
    opt.value = t.nome;
    opt.text = t.nome + " (" + t.professor + ")";
    select.appendChild(opt);
  });
}

// ===== criar chamada =====
function criarChamada() {
  let turma = document.getElementById("turmaChamada").value;
  let data = document.getElementById("dataAula").value;
  let tema = document.getElementById("temaAula").value;

  if(data === "" || tema === "") {
    alert("Preencha data e tema!");
    return;
  }

  document.getElementById("exibeTurma").innerText = turma;
  document.getElementById("exibeData").innerText = data;
  document.getElementById("exibeTema").innerText = tema;

  let tabela = document.getElementById("tabelaChamada");
  tabela.innerHTML = `
    <tr>
      <th>Aluno</th>
      <th>Presente</th>
      <th>Falta</th>
    </tr>
  `;

  let alunos = JSON.parse(localStorage.getItem("alunos")) || [];
  let alunosTurma = alunos.filter(a => a.turma === turma);

  alunosTurma.forEach(a => {
    let linha = tabela.insertRow(-1);
    linha.insertCell(0).innerText = a.nome;
    linha.insertCell(1).innerHTML = "<input type='checkbox'>";
    linha.insertCell(2).innerHTML = "<input type='checkbox'>";
  });
}

// ===== inicializar =====
carregarTurmas();
</script>

</body>
</html>

